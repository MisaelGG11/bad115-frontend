<p-dialog
  header="Editar publicación"
  [(visible)]="visible"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="flex w-full">
    <form [formGroup]="form" (submit)="submit()" class="w-full gap-2">
      <div class="flex flex-wrap lg:flex-nowrap w-full gap-2">
        <div class="w-full">
          <app-custom-input
            [parentForm]="form"
            label="Nombre de la publicación"
            fieldName="name"
            placeholder="Nombre de la publicación"
            formControlName="name"
            [type]="'text'"
            [required]="true"
          />
        </div>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap w-full gap-2 mt-4">
        <div class="w-full lg:basis-1/2 mt-2">
          <app-select
            label="Tipo de publicación"
            [selectOptions]="publicationsTypesOptions"
            [required]="true"
            [parentForm]="form"
            fieldName="type"
            formControlName="type"
          ></app-select>
        </div>

        <div class="w-full lg:basis-1/2 mt-2">
          <app-custom-input
            [parentForm]="form"
            label="Lugar de publicación"
            fieldName="place"
            placeholder="Lugar de publicación"
            formControlName="place"
            [type]="'text'"
            [required]="true"
          />
        </div>
      </div>

      @if (getFormControl('type').value === 'Libro') {
        <div class="flex flex-wrap lg:flex-nowrap w-full gap-2 mt-4">
          <div class="w-full lg:basis-1/2 mt-2">
            <app-custom-input
              [parentForm]="form"
              label="ISBN"
              fieldName="isbn"
              placeholder="ISBN del libro"
              formControlName="isbn"
              [type]="'text'"
              [required]="true"
            />
          </div>

          <div class="w-full lg:basis-1/2 mt-2">
            <app-custom-input
              [parentForm]="form"
              label="Edición"
              fieldName="edition"
              placeholder="Edición del libro"
              formControlName="edition"
              [type]="'number'"
              [required]="true"
            />
          </div>
        </div>
      }

      <div class="flex w-full justify-end mt-3">
        <p-button type="submit" label="Guardar" [loading]="editPublicationMutation.isPending()" />
      </div>
    </form>
  </div>
</p-dialog>
