<p-dialog
  header="A単adir experiencia laboral"
  [(visible)]="visible"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="flex w-full">
    <form [formGroup]="form" (submit)="submit()" class="w-full gap-2">
      <div class="flex flex-wrap lg:flex-nowrap w-full gap-2">
        <div class="w-full lg:basis-1/2">
          <app-custom-input
            [parentForm]="form"
            label="Nombre de la empresa"
            fieldName="organizationName"
            placeholder="Nombre de la empresa"
            formControlName="organizationName"
            [type]="'text'"
            [required]="true"
          />
        </div>

        <div class="w-full lg:basis-1/2">
          <app-custom-input
            [parentForm]="form"
            label="Nombre del puesto"
            fieldName="name"
            placeholder="Nombre del puesto"
            formControlName="name"
            [type]="'text'"
            [required]="true"
          />
        </div>
      </div>

      <div class="flex gap-2 my-3">
        <p-checkbox
          id="currentJob"
          formControlName="currentJob"
          value="true"
          (onChange)="onChangeCurrentJob($event)"
          inputId="currentJob"
        />
        <label for="currentJob">Actualmente desempe単o este trabajo</label>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap w-full gap-2 mt-1">
        <div class="w-full lg:basis-1/2 mt-2">
          <label
            for="initDate"
            class="block uppercase text-slate-600 text-xs font-bold mb-2 dark:text-white"
            >Fecha de inicio *</label
          >
          <p-calendar
            id="initDate"
            formControlName="initDate"
            [inputStyleClass]="
              'w-full block border-white text-gray-900 placeholder-slate-300 px-3 py-3 text-sm rounded shadow focus:ring-blue-500 focus:border-blue-500 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500'
            "
            [placeholder]="'Fecha de inicio'"
            [iconDisplay]="'input'"
            inputId="icondisplay"
            [required]="true"
            dateFormat="dd/mm/yy"
            [style]="{ width: '100%' }"
            [maxDate]="today"
          />
          <app-input-errors
            [fieldName]="'fecha de inicio'"
            [formField]="getFormControl('initDate')"
            propertyName="initDate"
          />

          <div class="mt-3"></div>
        </div>

        <div class="w-full lg:basis-1/2 mt-2">
          <label
            for="initDate"
            class="block uppercase text-slate-600 text-xs font-bold mb-2 dark:text-white"
            [ngClass]="checked() ? 'text-gray-light' : 'block'"
            >Fecha de finalizacion</label
          >
          <p-calendar
            id="finishDate"
            formControlName="finishDate"
            [inputStyleClass]="
              'w-full block border-white text-gray-900 placeholder-slate-300 px-3 py-3 text-sm rounded shadow focus:ring-blue-500 focus:border-blue-500 w-full dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500'
            "
            [placeholder]="'Fecha de inicio'"
            [iconDisplay]="'input'"
            inputId="icondisplay"
            [required]="true"
            dateFormat="dd/mm/yy"
            [style]="{ width: '100%' }"
            [maxDate]="today"
          />
          <app-input-errors
            [fieldName]="'fecha de inicio'"
            [formField]="getFormControl('finishDate')"
            propertyName="finishDate"
          />
        </div>
      </div>

      <div class="w-full mt-4">
        <label
          for="initDate"
          class="block uppercase text-slate-600 text-xs font-bold mb-2 dark:text-white"
          >Funciones desempe単adas *</label
        >
        <textarea
          pInputTextarea
          formControlName="functionPerformed"
          [autoResize]="true"
          [style]="{ width: '100%' }"
          [ngClass]="
            getFormControl('functionPerformed').invalid && getFormControl('functionPerformed').dirty
              ? 'border-red-500'
              : ''
          "
        ></textarea>
        <app-input-errors
          [fieldName]="'funciones desempe単adas'"
          [formField]="getFormControl('functionPerformed')"
          propertyName="functionPerformed"
        />
      </div>

      <div class="w-full mt-4">
        <div class="w-full lg:basis-1/2">
          <app-custom-input
            [parentForm]="form"
            label="Correo contacto empresa"
            formControlName="organizationContactEmail"
            fieldName="organizationContactEmail"
            placeholder="example@gmail.com"
            [type]="'text'"
            [required]="true"
          />
        </div>

        <div class="w-full lg:basis-1/2">
          <app-custom-input
            [parentForm]="form"
            label="Telefono contacto empresa"
            formControlName="organizationContactPhone"
            fieldName="organizationContactPhone"
            placeholder="Nombre del puesto"
            [type]="'tel'"
            [required]="true"
          />
        </div>
      </div>

      <div class="flex w-full justify-end mt-3">
        <p-button
          type="submit"
          label="Guardar"
          [loading]="createLaborExperienceMutation.isPending()"
        />
      </div>
    </form>
  </div>
</p-dialog>
